# UÃ§tan Uca AkÄ±ÅŸ: Landing Page â†’ Gateway â†’ Admin Panel

> **DokÃ¼man:** 04-API/02-uctan-uca-landing-admin.md
> **Son GÃ¼ncelleme:** 5 Åubat 2026
> **AkÄ±ÅŸ Tipi:** Lead YÃ¶netimi

---

## ğŸ¯ Bu DokÃ¼manÄ±n AmacÄ±

Landing Page'den gelen lead'lerin Admin Panel'e nasÄ±l ulaÅŸtÄ±ÄŸÄ±nÄ±, tÃ¼m API Ã§aÄŸrÄ±larÄ±nÄ± ve gÃ¼venlik mekanizmalarÄ±nÄ± ayrÄ±ntÄ±lÄ± olarak aÃ§Ä±klar.

---

## ğŸ“Š Genel AkÄ±ÅŸ DiyagramÄ±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LANDING PAGE â†’ GATEWAY â†’ ADMIN PANEL AKIÅI                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                â”‚
â”‚  â”‚   ZÄ°YARETÃ‡Ä°     â”‚                                                                â”‚
â”‚  â”‚   (Browser)     â”‚                                                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                â”‚
â”‚           â”‚                                                                          â”‚
â”‚           â”‚ 1. SayfayÄ± ziyaret eder                                                 â”‚
â”‚           â–¼                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚                      LANDING PAGE                                â”‚                â”‚
â”‚  â”‚                   (https://domizan.com)                          â”‚                â”‚
â”‚  â”‚                                                                  â”‚                â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                â”‚
â”‚  â”‚   â”‚                    Ä°LETÄ°ÅÄ°M FORMU                        â”‚   â”‚                â”‚
â”‚  â”‚   â”‚                                                          â”‚   â”‚                â”‚
â”‚  â”‚   â”‚   Ad Soyad:    [Ahmet Kaya                    ]         â”‚   â”‚                â”‚
â”‚  â”‚   â”‚   Email:       [ahmet@kayasmmm.com            ]         â”‚   â”‚                â”‚
â”‚  â”‚   â”‚   Telefon:     [0532 123 4567                 ]         â”‚   â”‚                â”‚
â”‚  â”‚   â”‚   Firma:       [Kaya SMMM                     ]         â”‚   â”‚                â”‚
â”‚  â”‚   â”‚   Mesaj:       [Demo talep ediyorum...        ]         â”‚   â”‚                â”‚
â”‚  â”‚   â”‚                                                          â”‚   â”‚                â”‚
â”‚  â”‚   â”‚              [ğŸš€ GÃ¶nder]                                 â”‚   â”‚                â”‚
â”‚  â”‚   â”‚                                                          â”‚   â”‚                â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                â”‚
â”‚  â”‚                                                                  â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                 â”‚                                                    â”‚
â”‚                                 â”‚ 2. Form submit                                     â”‚
â”‚                                 â”‚                                                    â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                 â”‚                                                    â”‚
â”‚                                 â–¼                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚                         GATEWAY                                  â”‚                â”‚
â”‚  â”‚                  (https://api.domizan.com)                       â”‚                â”‚
â”‚  â”‚                        Port: 3001                                â”‚                â”‚
â”‚  â”‚                                                                  â”‚                â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                â”‚
â”‚  â”‚   â”‚                      MIDDLEWARE                            â”‚ â”‚                â”‚
â”‚  â”‚   â”‚                                                            â”‚ â”‚                â”‚
â”‚  â”‚   â”‚   âœ… CORS kontrolÃ¼ (domizan.com origin)                   â”‚ â”‚                â”‚
â”‚  â”‚   â”‚   âœ… Rate limiting (IP baÅŸÄ±na 10 req/dakika)              â”‚ â”‚                â”‚
â”‚  â”‚   â”‚   âœ… API Key doÄŸrulama (X-API-Key header)                 â”‚ â”‚                â”‚
â”‚  â”‚   â”‚   âœ… Input validation (email, telefon formatÄ±)            â”‚ â”‚                â”‚
â”‚  â”‚   â”‚                                                            â”‚ â”‚                â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                â”‚
â”‚  â”‚                           â”‚                                      â”‚                â”‚
â”‚  â”‚                           â–¼                                      â”‚                â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                â”‚
â”‚  â”‚   â”‚                   LEAD SERVICE                             â”‚ â”‚                â”‚
â”‚  â”‚   â”‚                                                            â”‚ â”‚                â”‚
â”‚  â”‚   â”‚   1. Lead verilerini parse et                             â”‚ â”‚                â”‚
â”‚  â”‚   â”‚   2. PostgreSQL'e kaydet                                  â”‚ â”‚                â”‚
â”‚  â”‚   â”‚   3. WebSocket ile Admin Panel'e bildir                   â”‚ â”‚                â”‚
â”‚  â”‚   â”‚   4. (Opsiyonel) Email bildirimi gÃ¶nder                   â”‚ â”‚                â”‚
â”‚  â”‚   â”‚                                                            â”‚ â”‚                â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                â”‚
â”‚  â”‚                                                                  â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                 â”‚                                                    â”‚
â”‚                                 â”‚ 3a. DB'ye kaydet                                   â”‚
â”‚                                 â”‚ 3b. WebSocket notify                               â”‚
â”‚                                 â”‚                                                    â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                 â”‚                                                    â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚         â”‚                                               â”‚                           â”‚
â”‚         â–¼                                               â–¼                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚   PostgreSQL    â”‚                          â”‚    ADMIN PANEL      â”‚               â”‚
â”‚  â”‚                 â”‚                          â”‚ (http://admin...)   â”‚               â”‚
â”‚  â”‚   leads table   â”‚                          â”‚                     â”‚               â”‚
â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚                          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚               â”‚
â”‚  â”‚   id: uuid      â”‚                          â”‚  â”‚ ğŸ”” Yeni Lead! â”‚  â”‚               â”‚
â”‚  â”‚   name: varchar â”‚                          â”‚  â”‚               â”‚  â”‚               â”‚
â”‚  â”‚   email: varcharâ”‚                          â”‚  â”‚ Ahmet Kaya    â”‚  â”‚               â”‚
â”‚  â”‚   phone: varcharâ”‚                          â”‚  â”‚ Kaya SMMM     â”‚  â”‚               â”‚
â”‚  â”‚   company: var  â”‚                          â”‚  â”‚               â”‚  â”‚               â”‚
â”‚  â”‚   message: text â”‚                          â”‚  â”‚ [GÃ¶rÃ¼ntÃ¼le]   â”‚  â”‚               â”‚
â”‚  â”‚   status: new   â”‚                          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚               â”‚
â”‚  â”‚   created_at    â”‚                          â”‚                     â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” API Ä°stekleri DetayÄ±

### 1. Landing Page â†’ Gateway: Lead OluÅŸturma

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  REQUEST                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  POST https://api.domizan.com/v1/leads                                              â”‚
â”‚                                                                                      â”‚
â”‚  Headers:                                                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                          â”‚
â”‚  Content-Type: application/json                                                      â”‚
â”‚  X-API-Key: lp_live_a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6                                â”‚
â”‚  Origin: https://domizan.com                                                        â”‚
â”‚  User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) ...                          â”‚
â”‚                                                                                      â”‚
â”‚  Body:                                                                               â”‚
â”‚  â”€â”€â”€â”€â”€                                                                              â”‚
â”‚  {                                                                                   â”‚
â”‚    "name": "Ahmet Kaya",                                                            â”‚
â”‚    "email": "ahmet@kayasmmm.com",                                                   â”‚
â”‚    "phone": "+905321234567",                                                        â”‚
â”‚    "company": "Kaya SMMM",                                                          â”‚
â”‚    "message": "Demo talep ediyorum, muhasebe ofisimiz iÃ§in AI asistan arÄ±yoruz.",  â”‚
â”‚    "source": "landing_page",                                                        â”‚
â”‚    "utm_source": "google",                    // opsiyonel                          â”‚
â”‚    "utm_campaign": "smmm_2026"                // opsiyonel                          â”‚
â”‚  }                                                                                   â”‚
â”‚                                                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RESPONSE (201 Created)                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  {                                                                                   â”‚
â”‚    "success": true,                                                                  â”‚
â”‚    "data": {                                                                         â”‚
â”‚      "id": "550e8400-e29b-41d4-a716-446655440000",                                  â”‚
â”‚      "message": "Talebiniz alÄ±ndÄ±. En kÄ±sa sÃ¼rede sizinle iletiÅŸime geÃ§eceÄŸiz."    â”‚
â”‚    }                                                                                 â”‚
â”‚  }                                                                                   â”‚
â”‚                                                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ERROR RESPONSES                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  401 Unauthorized (GeÃ§ersiz API Key):                                               â”‚
â”‚  {                                                                                   â”‚
â”‚    "success": false,                                                                 â”‚
â”‚    "error": {                                                                        â”‚
â”‚      "code": "INVALID_API_KEY",                                                     â”‚
â”‚      "message": "GeÃ§ersiz veya eksik API anahtarÄ±"                                  â”‚
â”‚    }                                                                                 â”‚
â”‚  }                                                                                   â”‚
â”‚                                                                                      â”‚
â”‚  429 Too Many Requests:                                                              â”‚
â”‚  {                                                                                   â”‚
â”‚    "success": false,                                                                 â”‚
â”‚    "error": {                                                                        â”‚
â”‚      "code": "RATE_LIMIT_EXCEEDED",                                                 â”‚
â”‚      "message": "Ã‡ok fazla istek. LÃ¼tfen biraz bekleyin.",                          â”‚
â”‚      "retryAfter": 60                                                               â”‚
â”‚    }                                                                                 â”‚
â”‚  }                                                                                   â”‚
â”‚                                                                                      â”‚
â”‚  422 Validation Error:                                                               â”‚
â”‚  {                                                                                   â”‚
â”‚    "success": false,                                                                 â”‚
â”‚    "error": {                                                                        â”‚
â”‚      "code": "VALIDATION_ERROR",                                                    â”‚
â”‚      "message": "GeÃ§ersiz email formatÄ±",                                           â”‚
â”‚      "field": "email"                                                               â”‚
â”‚    }                                                                                 â”‚
â”‚  }                                                                                   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2. Gateway â†’ Admin Panel: WebSocket Bildirimi

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WEBSOCKET CONNECTION                                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  Connection URL:                                                                     â”‚
â”‚  wss://api.domizan.com/ws/admin                                                     â”‚
â”‚                                                                                      â”‚
â”‚  Authentication (handshake sÄ±rasÄ±nda):                                              â”‚
â”‚  {                                                                                   â”‚
â”‚    "type": "auth",                                                                   â”‚
â”‚    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."                               â”‚
â”‚  }                                                                                   â”‚
â”‚                                                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  NEW LEAD EVENT (Gateway â†’ Admin Panel)                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  {                                                                                   â”‚
â”‚    "type": "NEW_LEAD",                                                              â”‚
â”‚    "timestamp": "2026-02-05T16:15:30.000Z",                                         â”‚
â”‚    "data": {                                                                         â”‚
â”‚      "id": "550e8400-e29b-41d4-a716-446655440000",                                  â”‚
â”‚      "name": "Ahmet Kaya",                                                          â”‚
â”‚      "email": "ahmet@kayasmmm.com",                                                 â”‚
â”‚      "phone": "+905321234567",                                                      â”‚
â”‚      "company": "Kaya SMMM",                                                        â”‚
â”‚      "message": "Demo talep ediyorum...",                                           â”‚
â”‚      "source": "landing_page",                                                      â”‚
â”‚      "status": "new",                                                               â”‚
â”‚      "createdAt": "2026-02-05T16:15:30.000Z"                                        â”‚
â”‚    }                                                                                 â”‚
â”‚  }                                                                                   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3. Admin Panel â†’ Gateway: Lead Listesi

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  REQUEST                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  GET https://api.domizan.com/v1/admin/leads?page=1&limit=20&status=new              â”‚
â”‚                                                                                      â”‚
â”‚  Headers:                                                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                          â”‚
â”‚  Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...                      â”‚
â”‚  X-Admin-Secret: a1b2c3d4-e5f6-7890-abcd-ef1234567890                              â”‚
â”‚                                                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RESPONSE (200 OK)                                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  {                                                                                   â”‚
â”‚    "success": true,                                                                  â”‚
â”‚    "data": {                                                                         â”‚
â”‚      "leads": [                                                                      â”‚
â”‚        {                                                                             â”‚
â”‚          "id": "550e8400-e29b-41d4-a716-446655440000",                              â”‚
â”‚          "name": "Ahmet Kaya",                                                      â”‚
â”‚          "email": "ahmet@kayasmmm.com",                                             â”‚
â”‚          "phone": "+905321234567",                                                  â”‚
â”‚          "company": "Kaya SMMM",                                                    â”‚
â”‚          "message": "Demo talep ediyorum...",                                       â”‚
â”‚          "source": "landing_page",                                                  â”‚
â”‚          "status": "new",                                                           â”‚
â”‚          "assignedTo": null,                                                        â”‚
â”‚          "notes": null,                                                             â”‚
â”‚          "createdAt": "2026-02-05T16:15:30.000Z",                                   â”‚
â”‚          "updatedAt": "2026-02-05T16:15:30.000Z"                                    â”‚
â”‚        }                                                                             â”‚
â”‚      ],                                                                              â”‚
â”‚      "pagination": {                                                                 â”‚
â”‚        "page": 1,                                                                    â”‚
â”‚        "limit": 20,                                                                  â”‚
â”‚        "total": 45,                                                                  â”‚
â”‚        "totalPages": 3                                                              â”‚
â”‚      }                                                                               â”‚
â”‚    }                                                                                 â”‚
â”‚  }                                                                                   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4. Admin Panel â†’ Gateway: Lead GÃ¼ncelleme

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  REQUEST                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  PATCH https://api.domizan.com/v1/admin/leads/550e8400-e29b-41d4-a716-446655440000  â”‚
â”‚                                                                                      â”‚
â”‚  Headers:                                                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                          â”‚
â”‚  Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...                      â”‚
â”‚  X-Admin-Secret: a1b2c3d4-e5f6-7890-abcd-ef1234567890                              â”‚
â”‚  Content-Type: application/json                                                      â”‚
â”‚                                                                                      â”‚
â”‚  Body:                                                                               â”‚
â”‚  â”€â”€â”€â”€â”€                                                                              â”‚
â”‚  {                                                                                   â”‚
â”‚    "status": "contacted",                                                           â”‚
â”‚    "assignedTo": "sales@domizan.com",                                               â”‚
â”‚    "notes": "Telefonda gÃ¶rÃ¼ÅŸÃ¼ldÃ¼. Demo iÃ§in tarih belirlendi: 10 Åubat."            â”‚
â”‚  }                                                                                   â”‚
â”‚                                                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RESPONSE (200 OK)                                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  {                                                                                   â”‚
â”‚    "success": true,                                                                  â”‚
â”‚    "data": {                                                                         â”‚
â”‚      "id": "550e8400-e29b-41d4-a716-446655440000",                                  â”‚
â”‚      "status": "contacted",                                                         â”‚
â”‚      "assignedTo": "sales@domizan.com",                                             â”‚
â”‚      "notes": "Telefonda gÃ¶rÃ¼ÅŸÃ¼ldÃ¼. Demo iÃ§in tarih belirlendi: 10 Åubat.",         â”‚
â”‚      "updatedAt": "2026-02-05T16:20:00.000Z"                                        â”‚
â”‚    }                                                                                 â”‚
â”‚  }                                                                                   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5. Admin Panel â†’ Gateway: Lead'den Lisans OluÅŸturma

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  REQUEST                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  POST https://api.domizan.com/v1/admin/leads/550e8400.../convert-to-license         â”‚
â”‚                                                                                      â”‚
â”‚  Headers:                                                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                          â”‚
â”‚  Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...                      â”‚
â”‚  X-Admin-Secret: a1b2c3d4-e5f6-7890-abcd-ef1234567890                              â”‚
â”‚  Content-Type: application/json                                                      â”‚
â”‚                                                                                      â”‚
â”‚  Body:                                                                               â”‚
â”‚  â”€â”€â”€â”€â”€                                                                              â”‚
â”‚  {                                                                                   â”‚
â”‚    "packageType": "pro",                                                            â”‚
â”‚    "maxDevices": 5,                                                                 â”‚
â”‚    "durationMonths": 12,                                                            â”‚
â”‚    "monthlyTokenLimit": 500000,                                                     â”‚
â”‚    "geminiApiKey": "AIzaSyB...",                 // Åifrelenerek saklanacak        â”‚
â”‚    "telegramBotToken": "7123456789:ABC...",      // Åifrelenerek saklanacak        â”‚
â”‚    "telegramBotUsername": "@kaya_smmm_bot"                                          â”‚
â”‚  }                                                                                   â”‚
â”‚                                                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RESPONSE (201 Created)                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  {                                                                                   â”‚
â”‚    "success": true,                                                                  â”‚
â”‚    "data": {                                                                         â”‚
â”‚      "license": {                                                                    â”‚
â”‚        "id": "660e8500-f39c-52e5-b827-557766550001",                                â”‚
â”‚        "licenseKey": "DOMIZAN-PRO5-K4Y4-SMMM",                                      â”‚
â”‚        "ownerName": "Ahmet Kaya",                                                   â”‚
â”‚        "ownerEmail": "ahmet@kayasmmm.com",                                          â”‚
â”‚        "companyName": "Kaya SMMM",                                                  â”‚
â”‚        "packageType": "pro",                                                        â”‚
â”‚        "maxDevices": 5,                                                             â”‚
â”‚        "monthlyTokenLimit": 500000,                                                 â”‚
â”‚        "telegramBotUsername": "@kaya_smmm_bot",                                     â”‚
â”‚        "expiresAt": "2027-02-05T00:00:00.000Z",                                     â”‚
â”‚        "createdAt": "2026-02-05T16:30:00.000Z"                                      â”‚
â”‚      },                                                                              â”‚
â”‚      "lead": {                                                                       â”‚
â”‚        "id": "550e8400-e29b-41d4-a716-446655440000",                                â”‚
â”‚        "status": "converted"                                                        â”‚
â”‚      },                                                                              â”‚
â”‚      "emailSent": true                           // MÃ¼ÅŸteriye email gÃ¶nderildi      â”‚
â”‚    }                                                                                 â”‚
â”‚  }                                                                                   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Kod Ã–rnekleri

### Landing Page (React)

```typescript
// landing/src/services/api.ts

const API_URL = import.meta.env.VITE_GATEWAY_URL;
const API_KEY = import.meta.env.VITE_LANDING_API_KEY;

export async function submitLead(data: LeadFormData): Promise<LeadResponse> {
  const response = await fetch(`${API_URL}/v1/leads`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'X-API-Key': API_KEY,
    },
    body: JSON.stringify({
      ...data,
      source: 'landing_page',
    }),
  });

  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.error?.message || 'Bir hata oluÅŸtu');
  }

  return response.json();
}
```

### Gateway (Express)

```typescript
// gateway/src/routes/leads.ts

import { Router } from 'express';
import { validateApiKey } from '../middleware/auth';
import { validateLeadInput } from '../middleware/validation';
import { rateLimiter } from '../middleware/rateLimiter';
import { LeadService } from '../services/LeadService';
import { WebSocketService } from '../services/WebSocketService';

const router = Router();

// Rate limit: 10 requests per minute per IP
const leadRateLimiter = rateLimiter({
  windowMs: 60 * 1000,
  max: 10,
});

router.post(
  '/',
  leadRateLimiter,
  validateApiKey('landing'),  // X-API-Key header kontrolÃ¼
  validateLeadInput,           // Zod validation
  async (req, res) => {
    try {
      const lead = await LeadService.create(req.body);
      
      // Admin Panel'e WebSocket bildirimi
      WebSocketService.broadcast('admin', {
        type: 'NEW_LEAD',
        timestamp: new Date().toISOString(),
        data: lead,
      });
      
      res.status(201).json({
        success: true,
        data: {
          id: lead.id,
          message: 'Talebiniz alÄ±ndÄ±. En kÄ±sa sÃ¼rede sizinle iletiÅŸime geÃ§eceÄŸiz.',
        },
      });
    } catch (error) {
      res.status(500).json({
        success: false,
        error: { code: 'INTERNAL_ERROR', message: 'Bir hata oluÅŸtu' },
      });
    }
  }
);

export default router;
```

### Admin Panel (React)

```typescript
// admin/src/hooks/useWebSocket.ts

import { useEffect, useRef } from 'react';
import { useAuthStore } from '../stores/auth';
import { useLeadStore } from '../stores/leads';

export function useWebSocket() {
  const { token } = useAuthStore();
  const { addLead } = useLeadStore();
  const wsRef = useRef<WebSocket | null>(null);

  useEffect(() => {
    if (!token) return;

    const ws = new WebSocket(`${GATEWAY_WS_URL}/ws/admin`);
    
    ws.onopen = () => {
      // Authenticate
      ws.send(JSON.stringify({ type: 'auth', token }));
    };
    
    ws.onmessage = (event) => {
      const message = JSON.parse(event.data);
      
      switch (message.type) {
        case 'NEW_LEAD':
          addLead(message.data);
          // Bildirim gÃ¶ster
          showNotification('Yeni lead!', message.data.name);
          break;
        // DiÄŸer event'ler...
      }
    };
    
    wsRef.current = ws;
    
    return () => ws.close();
  }, [token]);
}
```

---

## âœ… GÃ¼venlik Kontrolleri

| Kontrol | Landing â†’ Gateway | Admin â†’ Gateway |
|---------|-------------------|-----------------|
| API Key | X-API-Key header | X-Admin-Secret header |
| JWT Token | âŒ Yok | âœ… Authorization header |
| CORS | domizan.com origin | admin.domizan.com origin |
| Rate Limit | 10/dakika | 100/dakika |
| Input Validation | Email, telefon formatÄ± | Model bazlÄ± |
| HTTPS | âœ… Zorunlu | âœ… Zorunlu |
