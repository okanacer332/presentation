# Bileşen Diyagramları (Component Diagrams)

> **Doküman:** 07-TEKNIK-MIMARI/03-bilesen-diyagramlari.md
> **Son Güncelleme:** 5 Şubat 2026

---

## 🔲 Gateway Servis Bileşenleri

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                          GATEWAY SERVİS BİLEŞENLERİ                                  │
├─────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                      │
│   ┌─────────────────────────────────────────────────────────────────────────────┐   │
│   │                              EXPRESS APP                                     │   │
│   │                                                                              │   │
│   │   ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────┐            │   │
│   │   │   Auth     │  │   Rate     │  │   CORS     │  │   Error    │            │   │
│   │   │ Middleware │  │  Limiter   │  │ Middleware │  │  Handler   │            │   │
│   │   └──────┬─────┘  └──────┬─────┘  └──────┬─────┘  └──────┬─────┘            │   │
│   │          │               │               │               │                  │   │
│   │          └───────────────┴───────────────┴───────────────┘                  │   │
│   │                                      │                                       │   │
│   │   ┌────────────────────────────────────────────────────────────────────────┐│   │
│   │   │                          ROUTES LAYER                                   ││   │
│   │   │                                                                         ││   │
│   │   │  /api/auth    /api/leads    /api/licenses    /api/devices              ││   │
│   │   │  /api/analyze /api/mukellef /api/documents   /webhook/telegram         ││   │
│   │   │                                                                         ││   │
│   │   └────────────────────────────────────────────────────────────────────────┘│   │
│   │                                      │                                       │   │
│   │   ┌────────────────────────────────────────────────────────────────────────┐│   │
│   │   │                        CONTROLLERS LAYER                                ││   │
│   │   │                                                                         ││   │
│   │   │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐                  ││   │
│   │   │  │    Auth      │  │    Lead      │  │   License    │                  ││   │
│   │   │  │  Controller  │  │  Controller  │  │  Controller  │                  ││   │
│   │   │  └──────────────┘  └──────────────┘  └──────────────┘                  ││   │
│   │   │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐                  ││   │
│   │   │  │   Device     │  │   Analyze    │  │   Telegram   │                  ││   │
│   │   │  │  Controller  │  │  Controller  │  │  Controller  │                  ││   │
│   │   │  └──────────────┘  └──────────────┘  └──────────────┘                  ││   │
│   │   └────────────────────────────────────────────────────────────────────────┘│   │
│   │                                      │                                       │   │
│   │   ┌────────────────────────────────────────────────────────────────────────┐│   │
│   │   │                         SERVICES LAYER                                  ││   │
│   │   │                                                                         ││   │
│   │   │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐                  ││   │
│   │   │  │   License    │  │  Intelligence│  │   Telegram   │                  ││   │
│   │   │  │   Service    │  │   Client     │  │   Service    │                  ││   │
│   │   │  └──────────────┘  └──────────────┘  └──────────────┘                  ││   │
│   │   └────────────────────────────────────────────────────────────────────────┘│   │
│   │                                      │                                       │   │
│   │   ┌────────────────────────────────────────────────────────────────────────┐│   │
│   │   │                           DATA LAYER                                    ││   │
│   │   │   ┌──────────────┐  ┌──────────────┐                                   ││   │
│   │   │   │  PostgreSQL  │  │   MongoDB    │                                   ││   │
│   │   │   │    (pg)      │  │  (mongoose)  │                                   ││   │
│   │   │   └──────────────┘  └──────────────┘                                   ││   │
│   │   └────────────────────────────────────────────────────────────────────────┘│   │
│   │                                                                              │   │
│   └─────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 🧠 Intelligence Servis Bileşenleri

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                       INTELLIGENCE SERVİS BİLEŞENLERİ                                │
├─────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                      │
│   ┌──────────────────────────────────────────────────────────────────────────────┐  │
│   │   ┌──────────────┐                                                           │  │
│   │   │  API Router  │  ← HTTP from Gateway                                     │  │
│   │   └──────┬───────┘                                                           │  │
│   │          │                                                                   │  │
│   │   ┌──────┴───────┐                                                           │  │
│   │   │   ANALYZER   │                                                           │  │
│   │   │   MODULE     │                                                           │  │
│   │   │              │                                                           │  │
│   │   │  ┌─────────────────────────────────────────────────────────────────┐    │  │
│   │   │  │                     DOCUMENT PIPELINE                           │    │  │
│   │   │  │                                                                 │    │  │
│   │   │  │  [OCR]─────▶[Preprocess]─────▶[Classification]─────▶[Extract] │    │  │
│   │   │  │    │            │                   │                   │      │    │  │
│   │   │  │    └────────────┴───────────────────┴───────────────────┘      │    │  │
│   │   │  │                           │                                     │    │  │
│   │   │  │                           ▼                                     │    │  │
│   │   │  │                    ┌─────────────┐                              │    │  │
│   │   │  │                    │   Gemini    │                              │    │  │
│   │   │  │                    │   Client    │──────▶ Google Gemini API    │    │  │
│   │   │  │                    └─────────────┘                              │    │  │
│   │   │  │                                                                 │    │  │
│   │   │  └─────────────────────────────────────────────────────────────────┘    │  │
│   │   │              │                                                           │  │
│   │   └──────────────┘                                                           │  │
│   │          │                                                                   │  │
│   │   ┌──────┴───────┐                                                           │  │
│   │   │   LEARNING   │                                                           │  │
│   │   │   MODULE     │                                                           │  │
│   │   │              │                                                           │  │
│   │   │  ┌─────────────────────────────────────────────────────────────────┐    │  │
│   │   │  │  [Pattern Store]────▶[Correction Handler]────▶[Weight Update]  │    │  │
│   │   │  └─────────────────────────────────────────────────────────────────┘    │  │
│   │   │              │                                                           │  │
│   │   └──────────────┘                                                           │  │
│   │          │                                                                   │  │
│   │   ┌──────┴───────┐                                                           │  │
│   │   │   VECTOR     │                                                           │  │
│   │   │   MODULE     │                                                           │  │
│   │   │              │                                                           │  │
│   │   │  ┌─────────────────────────────────────────────────────────────────┐    │  │
│   │   │  │  ChromaDB Client ←──▶ [Embedding] ←──▶ [Similarity Search]     │    │  │
│   │   │  └─────────────────────────────────────────────────────────────────┘    │  │
│   │   │                                                                          │  │
│   │   └──────────────────────────────────────────────────────────────────────────┘  │
│                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 🖥️ Desktop App Bileşenleri

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                        DESKTOP APP BİLEŞENLERİ (Electron)                            │
├─────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                      │
│   ┌────────────────────────────────┐  ┌────────────────────────────────┐            │
│   │         MAIN PROCESS           │  │       RENDERER PROCESS         │            │
│   │                                │  │                                │            │
│   │  ┌─────────────────────────┐  │  │  ┌─────────────────────────┐  │            │
│   │  │    License Manager      │  │  │  │     React App           │  │            │
│   │  │  • Activation           │  │  │  │  ┌─────────────────┐    │  │            │
│   │  │  • Validation           │  │  │  │  │   Pages          │    │  │            │
│   │  │  • Multi-device         │  │  │  │  │ Dashboard,       │    │  │            │
│   │  └─────────────────────────┘  │  │  │  │ Documents,       │    │  │            │
│   │                                │  │  │  │ Mukellef, etc.   │    │  │            │
│   │  ┌─────────────────────────┐  │  │  │  └─────────────────┘    │  │            │
│   │  │    Folder Watcher       │  │  │  │  ┌─────────────────┐    │  │            │
│   │  │  • File monitoring      │  │  │  │  │   Components     │    │  │            │
│   │  │  • New file detection   │  │  │  │  │ Cards, Modals,   │    │  │            │
│   │  └─────────────────────────┘  │  │  │  │ Forms, etc.      │    │  │            │
│   │                                │  │  │  └─────────────────┘    │  │            │
│   │  ┌─────────────────────────┐  │  │  └─────────────────────────┘  │            │
│   │  │    Gateway Client       │  │  │                                │            │
│   │  │  • API calls            │  │  └────────────────────────────────┘            │
│   │  │  • Auth headers         │  │                                                │
│   │  └─────────────────────────┘  │        ┌ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─              │
│   │                                │           IPC Bridge                │            │
│   │  ┌─────────────────────────┐  │ ◀────▶│ • Event messaging       │            │
│   │  │    File Manager         │  │        │ • Secure data transfer              │
│   │  │  • Move/copy files      │  │        └ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─              │
│   │  │  • Folder creation      │  │                                                │
│   │  └─────────────────────────┘  │                                                │
│   │                                │                                                │
│   └────────────────────────────────┘                                                │
│                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 📊 Bileşen Bağımlılıkları

| Bileşen | Bağımlılık | İletişim |
|---------|------------|----------|
| Desktop → Gateway | HTTP/REST | Belge analizi, lisans |
| Gateway → Intelligence | HTTP/REST | AI işlemleri |
| Gateway → PostgreSQL | TCP | Lisans, lead, device |
| Gateway → MongoDB | TCP | Belge metadata |
| Intelligence → ChromaDB | TCP | Vektör arama |
| Intelligence → Gemini | HTTPS | LLM API |

---

*Bu diyagramlar sistemin iç yapısını detaylı gösterir.*
